apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xplatforms.projectx.mavenwave.dev
spec:
  group: projectx.mavenwave.dev
  names:
    kind: XPlatform
    plural: xplatforms
  claimNames:
    kind: Platform
    plural: platforms
  connectionSecretKeys:
  - kubeconfig
  versions:
  - name: v1alpha1
    served: true
    referenceable: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              parameters:
                type: object
                properties:
                  subnetCidr:
                    type: string
                    default: 10.0.0.0/24
                  region:
                    type: string
                    enum:
                    - us-central
                    - us-east
                    - us-west
                  machineType:
                    type: string
                    enums:
                    - small
                    - medium
                    default: small
                  argo:
                    type: object
                    properties:
                      namespaces:
                        type: array
                        items:
                          type: string
                  argocd:
                    type: object
                    properties:
                      admins:
                        type: array
                        items:
                          type: string
                      host:
                        type: string
                      repo:
                        type: string
                      path:
                        type: string
                        default: apps
                  google:
                    type: object
                    properties:
                      projectId:
                        type: string
                      projectNumber:
                        type: string
                      masterIpv4CidrBlock:
                        type: string
                        default: 172.16.0.0/28
                  vcluster:
                    type: object
                    properties:
                      host:
                        type: string
                required:
                - region
            required:
            - parameters
                  
          status:
            type: object
            properties:
              network:
                type: object
                properties:
                  id:
                    type: integer
                    description: Network ID
                  selfLink:
                    type: string
                    description: Network self link
              subnetwork:
                type: object
                properties:
                  selfLink:
                    type: string
                    description: Subnetwork self link
                  cidr:
                    type: string
                    description: Subnetwork cidr
              kms:
                type: object
                properties:
                  keyRing:
                    type: object
                    properties:
                      name:
                        type: string
                  cryptoKey:
                    type: object
                    properties:
                      name:
                        type: string
                        description: KMS key name
              cluster:
                type: object
                properties:
                  location:
                    type: string
                    description: Cluster location
                  podIpv4Cidr:
                    type: string
                    description: Subnet cidr for pods
                  servicesIpv4Cidr:
                    type: string
                    description: Subnet cidr for services
                  endpoint:
                    type: string
                    description: Cluster endpoint
                  selfLink:
                    type: string
                    description: Cluster self-link
                  defaultNodePool:
                    type: object
                    properties:
                      location:
                        type: string
                        description: Cluster location
              serviceAccounts:
                type: object
                properties:
                  crossplane:
                    type: object
                    properties:
                      email:
                        type: string
                        description: Crossplane service account email
                      name:
                        type: string
                        description: Crossplane service account name
                  externalDns:
                    type: object
                    properties:
                      email:
                        type: string
                        description: External DNS service account email
                      name:
                        type: string
                        description: External DNS service account name
                